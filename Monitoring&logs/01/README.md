# Домашнее задание к занятию «Jenkins»

1. 
Минимальный набор метрик для мониторинга:

    HTTP метрики:
        Количество запросов: общее количество запросов к платформе.
        Время ответа: среднее, максимальное и минимальное время ответа на запросы.
        Статус-коды: количество запросов с кодами 2xx, 4xx, 5xx.
        Ошибки: количество ошибок, возникших при обработке запросов.

    Метрики ЦПУ:
        Загрузка ЦПУ: средняя загрузка ЦПУ за определенный период времени.
        Количество процессов: общее количество запущенных процессов на сервере.

Обоснование:

    HTTP метрики: Они показывают доступность и производительность платформы.
    Метрики ЦПУ: Они показывают, насколько интенсивно вычисления нагружают ЦПУ.


2. 

    Среднее время ответа: сколько времени требуется платформе, чтобы обработать запрос и выдать результат.
    Процент успешных запросов: отношение количества запросов с кодом 2xx к общему количеству запросов.
    Время обработки задачи: сколько времени требуется платформе, чтобы выполнить вычисления и создать отчет.

 Метрики качества обслуживания:

    Количество ошибок: сколько ошибок возникает при обработке запросов.
    Время простоя: сколько времени платформа недоступна для пользователей.
    Процент завершенных задач: сколько задач было успешно завершено за определенный период времени.

Объяснение:

Менеджера продукта интересует, насколько хорошо работает платформа с точки зрения клиента. Ему нужно понимать, как быстро она реагирует, насколько часто возникают ошибки, и насколько надежна она в целом.

3. 

    Логгирование: Можно использовать файл логов для записи всех ошибок приложения. Разработчики смогут просматривать этот файл, чтобы отслеживать ошибки.
    Журналирование: Можно использовать систему журналирования (например, Logstash, Fluentd, Graylog), чтобы централизованно собирать и анализировать логи.
    Мониторинг: Можно добавить в мониторинг метрики ошибок (например, количество ошибок за определенный период времени), чтобы разработчики могли видеть, насколько часто возникают ошибки.
4. 
Скорее всего в формуле не учли коды 1xx и 3xx, которые не являются ошибками. summ_all_requests учитывает и неуспешные запросы, которые могут снизить значение SLA.

5. 

Push и Pull системы мониторинга: плюсы и минусы

Push-система мониторинга:

Плюсы:

    Низкая задержка: Данные отслеживаются и отправляются в систему мониторинга в реальном времени.
    Масштабируемость: Легко масштабировать систему, добавляя новые агенты мониторинга для сбора данных с новых серверов или приложений.
    Простой в реализации: Относительно просто настроить push-систему мониторинга.

Минусы:

    Высокая нагрузка на серверы: Агенты мониторинга могут потреблять много ресурсов, особенно если они отправляют много данных.
    Проблемы с сетью: Проблемы с сетью могут привести к потере данных или задержкам в их доставке.
    Сложность обработки: Сложнее анализировать и агрегировать данные, полученные из разных источников.

Pull-система мониторинга:

Плюсы:

    Низкая нагрузка на серверы: Серверы мониторинга извлекают данные только тогда, когда это необходимо, что уменьшает нагрузку на них.
    Гибкость: Можно гибко настраивать частоту опроса данных и выборку необходимой информации.
    Легкость в анализе: Данные, полученные из единого источника, легче анализировать и агрегировать.

Минусы:

    Задержка: Существует задержка между моментом возникновения события и моментом получения данных.
    Сложность в реализации: Может быть сложнее настроить pull-систему мониторинга, особенно для сложных систем.
    Проблемы с масштабированием: Может быть сложнее масштабировать pull-систему мониторинга, особенно если она должна опрашивать множество источников данных.

6. 
Push-модель:

    Zabbix: Zabbix использует агенты, которые собирают метрики и отправляют их на сервер Zabbix. Это классическая push-модель.

Pull-модель:

    Prometheus: Prometheus - это система pull-мониторинга. Сервер Prometheus периодически опрашивает экспоненты (endpoints) на целевых серверах, чтобы получить метрики.
    VictoriaMetrics: VictoriaMetrics также использует pull-модель для сбора метрик.

Гибридные:

    TICK: TICK - это набор инструментов для мониторинга, состоящий из Telegraf (сбор данных), InfluxDB (хранение данных), Chronograf (визуализация) и Kapacitor (обработка данных). Telegraf может работать в обеих моделях: push и pull. Он может отправлять данные в InfluxDB (push) или получать данные от других источников (pull).
    Nagios: Nagios - это система мониторинга, которая может использовать как push, так и pull модели. Агенты Nagios (NRPE) отправляют данные на сервер Nagios (push), но Nagios также может опрашивать серверы напрямую для получения информации (pull).
7. скриншот Сhronograf
<image src="img/1.png"> 

8. Отобразил график утилизации CPU машины, на которой запущен TICK-стэк. В настройках графика включил отображение данных за последние 15 минут с интервалом обновления раз в 15 секунд:
<image src="img/2.png"> 

9. Установил Docker Input Plugin для Telegraf, настроил его. Возникли проблемы с разрешением на доступ Telegraf к /var/run/docker.sock. После решения этой проблемы, удалось получить метрики от docker контейнеров:
<image src="img/3.png"> 


